# 깨끗한 코드

## 코드의 존재

최근 Deven AI, Chat GPT 와 같이 코드를 자동으로 생성해주는 시대가 옴과 함께 코드를 작성하는 프로그래머는 필요가 없어질 거라는 전망이 있다. 하지만 이 채게엇 중요시하는 코드의 본질은 자동으로 생성하는 것만으로 그치지 않다고 하기에 이것만으로 코드가 사라지지 않을 것이라고 한다.

> 코드는 요구사항을 표현하는 언어

위와 같이 정의하는 코드는 추상화 수준이 높아지는 프로그래밍 언어 속에서 요구사항을 상세하고 정밀한 표현으로 나타내는 것은 불가능하다고 말한다. 즉, 어느 순간의 **정밀한 표현**은 필수이며 그 필요성은 없앨 수 없기에 코드는 항상 존재하고 이를 다루는 프로그래머는 사라지지 않는다고 말한다.


## 나쁜 코드

깨끗한 코드, 좋은 코드를 알기 전에 나쁜 코드에 대해서 인지할 필요가 있다.

### 나쁜 코드의 영향

80년대 후반 킬러 앱 하나를 구현하던 회사에서 제품 출시 시기가 점차 늘어지기 시작했고 이전 버전의 버그가 계속 남아 있는 문제가 존재했다. 얼마 못가 그 회사는 망했고 초창기 직원의 자초지종을 들었을 때 출시에 바빠 코드를 마구 짜고 점점 엉망이 되면서 감당이 불가능 수준에 이르렀다는 사례이다.

이렇게 나쁜 코드에 잡히게 되면 결국 돌아오지 못하는 길을 걷게 되는 것이다.

### 나쁜 코드의 책임

그렇다면 나쁜 코드는 과연 누구의 문제인가.

마케팅 부서? 개발자? 관리자?

물론 일정의 촉박함으로 양산되는 나쁜 코드는 수도 없이 존재한다. 이러한 일정을 주는 관리자의 문제라고 프로그래머들은 종종 책임을 넘기기도 하는데 결국 책에서는 다음과 같은 문장으로 정리하고 있다.

> 좋은 코드를 사수하는 일은 바로 우리 프로그래머들의 책임이다.

책의 비유와 함께 의사를 빗대어 보겠다.

환자가 빠르게 치료받고 싶어 의사에게 수술 전에 손을 씻지 않아도 된다 하고 필요한 약을 스스로 판단해 필요없다고 한다해서 의사는 환자의 의견을 따라야 하는가?

아니다. 

의사에게는 이러한 요구를 뿌리치고 환자를 올바른 진료의 길로 모셔야하는 책임이 있다.

위의 에시와 같이 프로그래머는 요구사항에 대해 책임감을 가지고 나쁜 코드의 위험을 인지못하는 요구에 그대로 따르는 것은 전문 프로그래머의 자격이 없다고 할 수 있다.
즉, 프로그래머는 **나쁜 코드에 대한 책임**을 가져야 한다는 것이다.


### 나쁜 코드의 원초적 난제

위의 내용을 따르고 싶지만 결국 기한과의 싸움에서 많은 개발자들은 나쁜 코드를 양산하게 된다.
이러한 현실 속에서 책의 저자인 로버트 C.마틴이 제공하는 기한을 맞추기 위한 유일한 방법은 **언제나 코드를 최대한 깨끗하게 유지하는 습관** 을 가지는 것이다.

책의 저자는 또한 이러한 과정이 없이 나중에 정리한다는 생각을 가지면 결국 **르블랑의 법칙** 처럼 **나중은 결코 오지 않고 결국 나쁜 코드**를 방치하게 된다고 한다.

## 깨끗한 코드

해당 책에서 코드를 작성하는 프로그래머를 그림을 그리는 화가에 비유하고 있다.
잘 그린 그림과 못 그린 그림을 구분하는 것과 그림을 그리는 것과는 별개인 것처럼 깨끗한 코드와 나쁜 코드를 구분할 줄 안다고 깨끗한 코드를 작성할 줄 아는 것은 다르다.
<br> 이러한 코드를 구분하고 작성할 줄 아는 사람은 `코드감각`이 뛰어나다고 평가한다.
<br> 이를 프로그래머의 임장에서 말하자면 다음의 표와 같다.

|구분|깨끗한 코드 구분|깨끗한 코드 작성|
|------|---|---|
|코드감각이 있는 사람| o | o |
|코드감각이 없는 사람| o| o |

또한, 여러 유명하고 노련한 프로그래머들인 비야네 스트롭스트룹, 그래디 부치, 데이브 토마스, 마이클 페더스, 론 제프리스의 깨끗한 코드의 의견을 정리하면 다음과 같다.

- 우아한 : 처음 보는 사람에게 즐거움을 선사해야 한다.
- 효율 : 속도만이 아닌 CPU 자원 등의 낭비를 고려해야 한다.
- 철저한 오류 처리 : 메모리 누수, 경쟁 상태, 일관성 없는 명명법 등의 세세한 사항까지 꼼꼼하게 처리한 코드이다.
- 가독성 : 해결할 문제의 긴장을 명확히 드러내야한다.
  - 다른 사람이 볼 수 있는 수준 : 데이브 토마스의 추가적인 의견으로 다른 사람이 고치기 쉬운 정도로 작성되어야 한다. 이 이유는 읽기 쉬운 코드와 고치기 쉬운 코드의 개념은 엄연히 다르기 때문이다.
- 명쾌한 추상화 : 여기서의 명쾌한이란 '불필요한 사실에 얽매이지 않는' 이라는 의미로 추축이 아닌 사실에 기반한 코드의 작성을 의미한다.
- 테스트 케이스의 존재 : TDD의 등장과 함게 테스트 케이스가 없으면 위의 내용과 별개로 깨끗하다고 할 수 없다.
- 주의 : 여기서의 주의란 고치려 살펴봐도 손 댈 곳이 없는 수준으로 주의를 기울였다는 수준이다. 즉, 시간을 들여 **깔끔**하고, **단정**하고, 세세한 사항까지 꼼꼼히 신경쓴 코드이다. 이러한 코드는 아무리 고치려해도 제자리로 돌아오기 마련이다.
- 중복 피하기 : 같은 작업을 여러 차례 반복하는 경우, 이름이 반복된 경우는 코드의 아이디어를 제대로 표현하지 못한 것이다.
- 언어처럼 보이기 : 여기서의 언어는 **하나의 문장**과 같다. 읽으면서 놀랄 일이 ㅇ벗을 정도로 문제를 풀기 위한 언어로 표현되어야 한다.

## 책에서 전달하고자 하는 Clean Code

위의 깨끗한 코드의 내용은 절대적으로 **옳다**의 개념은 없다. 또한, 논쟁의 여지가 있다. 하지만 이러한 경험과 반복적인 시행착오로 습득한 것은 들여다보고 이러한 시각을 이해할 필요가 있다.
<br>
이렇게 제시되는 기법, 도구, 방식들을 잘 이해하교 실제로 연습하는 과정을 가지면서 공부해야한다.
